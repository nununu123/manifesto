Skip to content
syncArt
/
manifesto

Type / to search

Code
Issues
Pull requests
Discussions
Actions
Projects
Wiki
Security
Insights
Settings
Auto Tag on New Commit
Update gh_actions.yml #14
Jobs
Run details
Workflow file for this run
.github/workflows/gh_actions.yml at 60d570e
name: Auto Tag on New Commit

on:
  push:
    branches:
      - main

jobs:
  create_tag:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
        
      - name: Get Previous Tag
        id: get_previous_tag
        run: |
          PREVIOUS_TAG=$(git describe --tags $(git rev-list --tags --max-count=1))
          echo "Previous tag: $PREVIOUS_TAG"
          echo "::set-output name=previous_tag::$PREVIOUS_TAG"
          
      - name: Create Tag
        id: create_tag
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git tag -a "v${{ github.run_number }}" -m "Auto-generated tag"
          git push origin "v${{ github.run_number }}"
        env: 
          GITHUB_TOKEN: ${{ secrets.PAT_ACTIONS }}

      - name: Delete Previous Tag
        if: steps.get_previous_tag.outputs.previous_tag != ''
        run: |
          PREVIOUS_TAG=${{ steps.get_previous_tag.outputs.previous_tag }}
          git tag -d "$PREVIOUS_TAG"
          git push origin --delete "$PREVIOUS_TAG"
Update gh_actions.yml Â· syncArt/manifesto@60d570e
